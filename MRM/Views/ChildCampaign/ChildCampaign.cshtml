@model MRM.ViewModel.ChildCampaignViewModel
@{
    ViewBag.Title = "ChildCampaign";
}



<script src="~/Scripts/jquery-2.1.3.min.js"></script>

<div>
@*@using (Html.BeginForm("ChildCampaign", "ChildCampaign", FormMethod.Post, new { id = "myform" }))*@
@using (Ajax.BeginForm("Save", "ChildCampaign", new AjaxOptions { UpdateTargetId = "divInterestDeatils" }))
{
    <form>
        <section class="content-header"></section>
        <section class="content">
            <!-- SELECT2 EXAMPLE -->
            <div class="box box-default">
                <div class="box-header with-border">
                    
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <fieldset>
                        <legend>Sub Campaign</legend>
                        <div class="row">
                            <div class="col-md-6">

                                <div class="form-group">
                                    <label>Master Campaign</label>
                                    @Html.DropDownListFor(m => m.MasterViewModels, new SelectList(Model.MasterViewModels, "Id", "Name"), new { @class = "form-control"})
                                </div>
                                <div class="form-group">
                                    <label>BG Led</label>
                                    @Html.DropDownList("Type(Sub Campaign)", new List<SelectListItem>
                                     {
                                        new SelectListItem{ Text="BG Led", Value = "0" },
                                        new SelectListItem{ Text="GEPS", Value = "1" }
                                     }, new { @class = "form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Business Group*</label>
                                    @Html.ListBoxFor(m => m.BusinessGroups_Id, new MultiSelectList(Model.BusinessGroupViewModels, "Id", "Name", Model.BusinessGroups_Id), new { @class = "mr-mulsl form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Business Line*</label>
                                    @Html.ListBoxFor(m => m.BusinessLines_Id, new MultiSelectList(Model.BusinessLineViewModels, "Id", "Name", Model.BusinessLines_Id), new { @class = "mr-mulsl form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Status</label>
                                    @Html.DropDownListFor(m => m.Status, new List<SelectListItem>
                                     {
                                        new SelectListItem{ Text="Partial" },
                                        new SelectListItem{ Text="Complete"}
                                     }, new { @class = "form-control" })

                                </div>
                                <div class="form-group">
                                    <label>Sub Campaign*</label>
                                    @Html.TextBoxFor(m => m.Name, new { @class = "form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Sub Campaign Description</label>
                                    @Html.TextAreaFor(m => m.CampaignDescription, new { @class = "form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Marketing Influence Leads</label>
                                    @Html.TextBoxFor(m => m.MarketingInfluenceLeads, new { @class = "form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Marketing Generated Leads</label>
                                    @Html.TextBoxFor(m => m.MarketingGeneratedLeads, new { @class = "form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Budget</label>
                                    @Html.TextBoxFor(m => m.Budget, new { @class = "form-control" })
                                </div>                              
                            </div>
                            <!-- /.col -->

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Theme</label>
                                    @Html.ListBoxFor(m => m.Themes_Id, new MultiSelectList(Model.ThemeViewModels, "Id", "Name", Model.Themes_Id), new { @class = "mr-mulsl form-control" })
                                </div>
                               <div class="form-group">
                                   <div class="col-md-6 form-group" style="margin-left:-14px">
                                       <label>Segment*</label>
                                       @Html.ListBoxFor(m => m.Segments_Id, new MultiSelectList(Model.SegmentViewModels, "Id", "Name", Model.Segments_Id), new { @class = "mr-mulsl form-control" })
                                   </div>
                                   <div class="col-md-6 form-group">
                                       <label>Industry*</label>
                                       @Html.ListBoxFor(m => m.Industries_Id, new MultiSelectList(Model.IndustryViewModels, "Id", "Name", Model.Industries_Id), new { @class = "mr-mulsl form-control" })
                                   </div>
                                    </div>                              
                                <div class="form-group">
                                    <div class="col-md-6" style="margin-left:-14px"></div>
                                    <div class="col-md-6">
                                    <label>Geography</label>
                                        @Html.ListBoxFor(m => m.Geographys_Id, new MultiSelectList(Model.GeographyViewModels, "Id", "Name", Model.Geographys_Id), new { @class = "mr-mulsl form-control" })
                                    </div>
                                  
                                </div>
                                <div class="form-group">
                                    <div class='col-sm-6' style="margin-left:-14px">
                                        <div class="form-group">
                                            <label>Start Date</label>
                                            <div class='input-group date' id='StartDate'>
                                                @Html.TextBoxFor(m => m.StartDate, new { @maxlength = "10", @class = "form-control" })
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='col-sm-6' style="margin-left:2px">
                                        <div class="form-group">
                                            <label>End Date</label>
                                            <div class='input-group date' id='EndDate'>
                                                @Html.TextBoxFor(m => m.EndDate, new { @maxlength = "10", @class = "form-control" })
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                <div class="form-group">
                                    <label>Marketing Influence Opportunity</label>
                                    @Html.TextBoxFor(m => m.MarketingInfluenceOpportunity, new { @maxlength = "25", @class = "form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Marketing Generated Opportunity</label>
                                    @Html.TextBoxFor(m => m.MarketingGeneratedOpportunity, new { @maxlength = "25",@class = "form-control" })
                                </div>                              
                                <!-- /.form-group -->
                                <div class="form-group">
                                    <label>Spend*</label>
                                    @Html.TextBoxFor(m => m.Spend, new { @maxlength = "10", @class = "form-control" })
                                </div>
                                <!-- /.form-group -->

                            </div>

                            <!-- /.col -->
                        </div>

                    </fieldset>
                    <fieldset>
                        <div class="row" style="padding-top:10px">
                            <div class="col-md-9">
                            </div>
                            <div class="col-md-3">
                                <div class="col-md-6">
                                    <input type="button" class="btn btn-block btn-primary btn-lg" value="Back" onclick="location.href='@Url.Action("Index", "MasterCampaign")'" />
                                </div>
                                <div class="col-md-6">
                                    <button Id="btnsubmit" class="btn btn-block btn-primary btn-lg">Submit</button>

                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <!-- /.row -->
                </div>
                <!-- /.box-body -->
            </div>

        </section>
    </form>
}
</div>

@*<script src="~/Scripts/jquery-1.10.2.intellisense.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>*@
<link href="~/Content/datepicker3.css" rel="stylesheet" />
<script src="~/Content/bootstrap-datepicker.js"></script>
<script>

    $(document).ready(function () {
        $(document).on("change", "#MasterViewModels", function (e) {
            var masterId = $(this).find(":selected").val();

            if (masterId != 0) {
                window.location.href = '/ChildCampaign/ChildCampaign?id=' + masterId + '&_=' + (new Date()).getTime();
                //$.ajax({
                //    type: 'post',
                //    dataType: 'json',
                //    url: '/ChildCampaign/ChildCampaign?id=' + masterId + '&_=' + (new Date()).getTime(),
                //    success: function (data) {
                //        {
                //            debugger
                //            alert(data);
                //            //$('#maindiv').html(data);
                //        }
                //    },
                //});
            }

            
        });
        
    });

    $('#StartDate').datepicker();
    $('#EndDate').datepicker();
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $('.mr-mulsl').multiselect({
            buttonWidth: '52%'
        });

    });
</script>

<style>
    fieldset {
        border: 1px solid #DDD;
        padding: 0 1.4em 1.4em 1.4em;
        margin: 25px 0 1.5em 0;
    }

    legend {
        font-size: 1.2em;
        font-weight: bold;
    }
</style>